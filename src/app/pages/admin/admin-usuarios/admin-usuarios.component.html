<div class="admin-dashboard">
  <div class="admin-header">
    <h2>Gerenciamento de Usu치rios</h2>
    <a routerLink="/admin" class="btn-voltar">
      <i class="fa fa-arrow-left"></i> Voltar ao Dashboard
    </a>
  </div>

  <!-- Sistema de mensagens de feedback -->
  <div *ngIf="mensagem" class="mensagem-feedback" [ngClass]="mensagem.tipo">
    <p>{{ mensagem.texto }}</p>
    <button class="fechar" (click)="mensagem = null">칑</button>
  </div>

  <div class="dashboard-section">
    <div class="section-header">
      <h3>Dashboard de Usu치rios</h3>
      <button class="toggle-btn" (click)="toggleDashboard()">
        {{ mostrarDashboard ? "Ocultar Dashboard" : "Mostrar Dashboard" }}
      </button>
    </div>

    <div class="dashboard-content" *ngIf="mostrarDashboard">
      <h4>Usu치rios do Sistema</h4>
      <div class="card-container">
        <div class="user-card" *ngFor="let user of usuariosSistema">
          <div class="user-info">
            <div class="user-avatar">
              {{ user.username.charAt(0).toUpperCase() }}
            </div>
            <div class="user-details">
              <h5>{{ user.name }}</h5>
              <p class="user-role">{{ user.role }}</p>
              <p class="user-id">ID: {{ user.id }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="admin-section">
    <h3>Usu치rios do Sistema</h3>

    <table class="users-table" *ngIf="usuariosSistema.length">
      <thead>
        <tr>
          <th>Nome</th>
          <th>Usu치rio</th>
          <th>Fun칞칚o</th>
          <th>A칞칫es</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let u of usuariosSistema">
          <td>{{ u.name }}</td>
          <td>{{ u.username }}</td>
          <td>
            <span class="role-badge {{ u.role }}">{{ u.role }}</span>
          </td>
          <td>
            <button
              class="delete-btn"
              [disabled]="u.id === 1"
              (click)="remover(u.id)"
              title="{{
                u.id === 1
                  ? 'N칚o 칠 permitido remover o administrador principal'
                  : 'Remover usu치rio'
              }}"
            >
              游딈
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="form-container">
      <h3>Adicionar Novo Usu치rio</h3>
      <form (ngSubmit)="criar()" class="new-user-form">
        <div class="form-group">
          <label for="nome">Nome</label>
          <input
            [(ngModel)]="novo.nome"
            id="nome"
            name="nome"
            placeholder="Nome completo"
            required
          />
        </div>
        <div class="form-group">
          <label for="email">E-mail</label>
          <input
            [(ngModel)]="novo.email"
            id="email"
            name="email"
            type="email"
            placeholder="E-mail"
            (blur)="sugerirUsername()"
            required
          />
        </div>
        <div class="form-group">
          <label for="username">Nome de Usu치rio</label>
          <input
            [(ngModel)]="novo.username"
            id="username"
            name="username"
            placeholder="Nome de usu치rio para login"
            required
          />
          <small class="input-hint"
            >Este ser치 o nome usado para fazer login no sistema.</small
          >
        </div>
        <div class="form-group">
          <label for="senha">Senha</label>
          <input
            [(ngModel)]="novo.senha"
            id="senha"
            name="senha"
            type="password"
            placeholder="Senha"
            required
          />
        </div>
        <div class="form-group">
          <label for="role">Fun칞칚o</label>
          <select [(ngModel)]="novo.role" id="role" name="role">
            <option value="admin">Administrador</option>
            <option value="editor">Editor</option>
          </select>
        </div>
        <button class="primary" type="submit">Adicionar Usu치rio</button>
      </form>
    </div>
  </div>
</div>
